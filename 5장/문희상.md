# 5장 형식 맞추기

### 형식을 맞추는 목적

- 융통성 없이 맹목적으로 따르면 안 된다
- 오늘 구현한 코드의 가독성은 앞으로 바뀔 코드의 품질에 지대한 영향을 미친다
- 구현 스타일과 가독성 수준은 유지보수 용이성과 확장성에 계속 영향을 미친다

### 적절한 행 길이를 유지하라

- Junit, FitNesse, Time and Money와 같은 시스템도 500줄을 넘어가는 파일이 없으며 대다수가 200줄 미만이다
- 일반적으로 큰 파일보다 작은 파일이 이해하기 쉽다

**신문 기사처럼 작성하라**

- 기사의 경우 첫 문단은 전체 기사 내용을 요약한다
- 소스 파일도 이름은 간단하면서 설명이 가능하게 짓는다
- 첫 부분은 고차원 개념과 알고리즘을 설명한다
- 아래로 내려갈수록 의도를 세세하게 묘사한다

**개념은 빈 행으로 분리하라**

- 각 행은 수식이나 절을 나타내고, 일련의 행 묶음은 완결된 생각 하나를 표현한다
- 생각 사이는 빈 행을 넣어 분리해야 마땅하다

**세로 밀집도**

- 줄바꿈이 개념을 분리한다면 세로 밀집도는 연관성을 의미한다
- 의미 없는 주석으로 연관성이 높은 코드를 떨어뜨려 놓지 말자

**수직 거리**

- 정의된 코드를 찾으려 상속 관계를 줄줄이 거슬러 올라간 경험이 있는가
- 시스템이 무엇을 하는지 이해하고 싶은데, 이를 찾느라 시간과 노력을 소모한다
- 서로 밀접한 개념은 세로로 가까이 둬야 하며, 타당한 근거가 없다면 서로 밀접한 개념은 한 파일에 속해야 한다
- **변수 선언** - 사용하는 위치에 최대한 가까이 선언한다
    - 우리가 만든 함수는 매우 짧으므로 지역 변수는 각 함수 맨 처음에 선언한다
- **인스턴스 변수** - 클래스 맨 처음에 선언한다
    - 잘 알려진 위치에 인스턴스 변수를 모은다는 사실이 중요하다
- **종속 함수** - 한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치한다
    - 첫째 함수에서 가장 먼저 호출하는 함수가 바로 아래에 오도록 정의하자
    - 이는 함수를 찾기 쉽게 하며, 모듈 전체의 가독성도 높인다
- 상수를 알아야 마땅한 함수에서 실제로 사용하는 함수로 상수를 넘겨주는 방법이 좋다
- **개념적 유사성** - 친화도가 높을수록 코드를 가까이 배치한다
    1. 다른 함수를 호출해 생기는 직접적인 종속성
    2. 변수와 그 변수를 사용하는 함수
    3. 비슷한 동작을 수행하는 일군의 함수

### 가로 형식 맞추기

- 프로젝트 7개 조사 결과, 80자 이후부터 행 수는 급격하게 감소한다
- 프로그래머는 명백하게 짧은 행을 선호한다

**가로 공백과 밀집도**

- 공백을 넣으면 두 가지 주요 요소가 확실히 나뉜다
- 함수 이름과 이어지는 괄호 사이에는 공백을 넣지 않는다. 서로 밀접하기 때문에
- 괄호 안 인수는 공백으로 분리한다. 인수가 별개라는 사실을 보여주기 위해
- b*b - 4*a*c

**가로 정렬**

- 가로 정렬의 경우 변수 유형은 무시하고 변수 이름부터 읽게 된다
- 정렬이 필요할 정도로 목록이 길다면 문제는 목록 길이지 정렬 부족이 아니다

**들여쓰기**

- 범위로 이뤄진 계층을 표현하기 위해 코드를 들여쓴다
- 들여쓰기한 파일은 구조가 한눈에 들어온다
- 빈 while 문이나 for 문의 경우 세미콜론(;)을 새 행에다 제대로 들여써서 넣어준다

### 팀 규칙

- 스타일은 일관적이고 매끄러워야 한다
- 한 소스 파일에서 봤던 형식이 다른 소스 파일에도 쓰이리라는 신뢰감을 독자에게 줘야 한다
