# 3장. 함수

## 인상 깊은 내용 - 함수를 잘 만드는 법을 소개

- **한 가지만 해라!**

  함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다.
  단순히 다른 표현이 아니라 의미 있는 이름으로 다른 함수를 추출할 수 있다면 그 함수는 여러 작업을 하는 셈이다.

- **위에서 아래로 코드 읽기: 내려가기 규칙**

  위에서 아래로 TO 문단을 읽어내려 가듯이 코드를 구현하면 추상화 수준을 일관되게 유지하기 쉬워진다.

- **오류 코드보다 예외를 사용하라!**

  오류 코드보다 예외를 사용하라! 명령 함수에서 오류 코드를 반환하는 방식은 명령/조회 분리 규칙을 미묘하게 위반한다.
  자칫하면 if 문에서 명령을 표현식으로 사용하기 쉬운 탓이다.

  > ```java
  > if (deletePage(page) == E_OK) {
  >   if (registry.deleteReference(page.name) == E_OK) {
  >     if (configKeys.deleteKey(page.name.makeKey()) == E_OK) {
  >       logger.log("page deleted");
  >     } else {
  >       logger.log("configKey not deleted");
  >     }
  >   } else {
  >     logger.log("deleteReference from registry failed");
  >   }
  > } else {
  >   logger.log("delete failed");
  >   return E_ERROR;
  > }
  > ```

  반면 오류 코드 대신 예외를 사용하면 오류 처리 코드가 원래 코드에서 분리되므로 코드가 깔끔해진다.

  > ```java
  > try {
  >   deletePage(page);
  >   registry.deleteReference(page.name);
  >   configKeys.deleteKey(page.name.makeKey());
  > } catch (Exception e) {
  >   logger.log(e.getMessage());
  > }
  > ```

- **오류 처리도 한 가지 작업이다.**

  오류 처리도 한 가지 작업이다. 함수는 '한 가지' 작업만 해야 한다.
  오류 처리도 '한 가지' 작업에 속한다.
  그러므로 오류를 처리하는 함수는 오류만 처리해야 마땅하다.

  함수에 키워드 try가 있다면 함수는 try 문으로 시작해 catch/finally 문으로 끝나야 한다는 말이다.

## 💭 느낀 점

  가장 인상 깊었던 부분은 단연 **"한 가지만 해라!"** 라는 원칙이다.
  최근 한 현직자에게 컴포넌트 분리 기준에 대해 물어본 적이 있었는데, 그분도 같은 이야기를 했다.

  "하나의 파일이나 컴포넌트가 두 가지 이상의 역할을 하면 나눠야 한다."

  이 원칙은 단순히 함수에만 적용되는 게 아니다.
  **코드 전체의 구조, 설계, 나아가 팀의 개발 문화까지 관통하는 핵심 철학**이라고 느꼈다.

  함수가 명확하면 모듈이 명확해지고, 모듈이 명확하면 시스템 전체가 깔끔해진다.
  그래서 이 원칙은 가장 단순하면서도 가장 강력한 원칙이라고 생각한다.
