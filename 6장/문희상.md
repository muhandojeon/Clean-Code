# 6장 객체와 자료 구조
- 변수를 비공개로 정의하는 이유는 남들이 변수에 의존하지 않게 만들고 싶어서다

### 자료 추상화

- 구현을 외부로 노출하지 말고 추상화를 통해 숨기자
- 하지만 단순히 인터페이스만 적용한다고 추상화가 이뤄지지 않는다
- 자료를 세세하게 공개하기보다는 추상적인 개념으로 표현하는 편이 좋다
- 개발자는 객체가 포함하는 자료를 표현할 가장 좋은 방법을 심각하게 고민해야 한다

### 자료/객체 비대칭

- 절차적인 코드는 기존 자료 구조를 변경하지 않으면서 새 함수를 추가하기 쉽다
- 객체 지향 코드는 기존 함수를 변경하지 않으면서 새 클래스를 추가하기 쉽다

### 디미터 법칙

- 모듈은 자신이 조작하는 객체의 속사정을 몰라야 한다는 법칙이다
- 아래의 코드는 디미터 법칙을 어기는 듯이 보인다

```java
final String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath();
```

- 위와 같은 코드는 여러 객차가 한 줄로 이어진 기차처럼 보이기 때문에 조잡하다 여겨지므로 피하는 편이 좋다

```java
Options opts = ctxt.getOptions();
File scratchDir = opts.getScratchDir();
final String outputDir = scratchDir.getAbsolutePath();
```

- 위처럼 개선할 수 있다
- 하지만 디미터 법칙을 위반하는지 여부는 ctxt, Options, ScratchDir이 객체인지 아니면 자료 구조인지에 달렸다
- 자료 구조라면 당연히 내부 구조를 노출하므로 디미터 법칙이 적용되지 않는다

```java
final String outputDir = ctxt.options.scratchDir.absolutePath;
```

- 자료 구조는 무조건 함수 없이 공개 변수만 포함하고 객체는 비공개 변수와 공개 함수를 포함

**구조체 감추기**

- 객체한테는 뭔가를 하라고 말해야지 속을 드러내라고 말하면 안 된다
- 위의 경우에는 절대 경로를 얻으려는 이유가 임시 파일을 생성하기 위한 목적이기에 그에 맞춰 추상화 수준을 설정하자

### 자료 전달 객체

- 자료 구조체의 전형적인 형태는 공개 변수만 있고 함수가 없는 클래스다
- 흔히DTO는 일련의 단계에서 가장 처음으로 사용하는 구조체다

**활성 레코드**

- DTO의 특수한 형태다
- 공개 변수가 있거나 비공개 변수에 조회/설정 함수가 있는 자료 구조지만, 대게 save나 find와 같은 탐색 함수도 제공한다
- 이곳엔 비즈니스 규칙을 추가하면 안된다
- 자료 구조로 취급하며, 비즈니스 규칙은 객체를 따로 생성하여 작성한다

### 결론

- 객체는 동작을 공개하고 자료를 숨긴다
- 그래서 기존 동작을 변경하지 않으면서 새 객체 타입을 추가하기는 쉬운 반면, 기존 객체에 새 동작을 추가하기는 어렵다
